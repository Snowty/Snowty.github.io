<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ç­±ç­±æ±€çš„ç¢ç¢å¿µ</title>
    <description>æ¬¢è¿è†å¬æˆ‘çš„ç¢ç¢å¿µğŸ˜¯</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sun, 11 Mar 2018 19:47:24 +0800</pubDate>
    <lastBuildDate>Sun, 11 Mar 2018 19:47:24 +0800</lastBuildDate>
    <generator>Jekyll v3.4.3</generator>
    
      <item>
        <title>Word2Vecä»¥åŠtfå®ç°</title>
        <description>&lt;h3 id=&quot;å¼•è¨€&quot;&gt;å¼•è¨€ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;å¤§éƒ¨åˆ†å†…å®¹æ‘˜è‡ªã€ŠTensorFlowå®æˆ˜ã€‹ï¼ˆé»„æ–‡åšï¼‰ï¼Œç®—æ˜¯è¯»ä¹¦ç¬”è®°ï¼Œä¹Ÿä¼šåœ¨ç½‘ä¸Šæœé›†ä¸€äº›ç›¸å…³çš„æ–‡ç« è¿›è¡Œè¡¥å……ã€‚
æˆ‘è§‰å¾—è¿™æœ¬ä¹¦å¾ˆniceå‘€ï¼Œè™½ç„¶æ²¡æœ‰å¯¹å…·ä½“çš„ç¥ç»ç½‘ç»œè¿›è¡Œè¯¦ç»†çš„è®²è§£ï¼Œä½†æ˜¯å¾ˆé€šä¿—æ˜“æ‡‚ï¼Œåå®æˆ˜ã€‚
ä¹Ÿä¼šæœ‰çœ‹äº†ç¥ç»ç½‘ç»œçš„è¯¦è§£ç„¶åé›¨é‡Œé›¾é‡Œï¼Œå†åœ¨è¿™è¾¹çœ‹äº†æ€»ç»“çš„è±ç„¶å¼€æœ—ä¹‹æ„Ÿã€‚&lt;/p&gt;

&lt;h3 id=&quot;one-hot-encoder&quot;&gt;One-Hot Encoder&lt;/h3&gt;

&lt;p&gt;æœ€æ—©çš„è¯å‘é‡è¡¨ç¤ºæ–¹æ³•ä¸ºOne-Hot Encoderï¼Œå°†å­—è¯è½¬æˆç¦»æ•£çš„å•ç‹¬çš„ç¬¦å·ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;æ­å· [0,0,0,0,0,0,0,1,0,â€¦â€¦ï¼Œ0,0,0,0,0,0,0]
ä¸Šæµ· [0,0,0,0,1,0,0,0,0,â€¦â€¦ï¼Œ0,0,0,0,0,0,0]
å®æ³¢ [0,0,0,1,0,0,0,0,0,â€¦â€¦ï¼Œ0,0,0,0,0,0,0]
åŒ—äº¬ [0,0,0,0,0,0,0,0,0,â€¦â€¦ï¼Œ1,0,0,0,0,0,0]
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ­å·ã€ä¸Šæµ·ã€å®æ³¢ã€åŒ—äº¬å„å¯¹åº”ä¸€ä¸ªå‘é‡ï¼Œå‘é‡ä¸­åªæœ‰ä¸€ä¸ªå€¼ä¸º1ï¼Œå…¶ä½™éƒ½ä¸º0ã€‚
ä½¿ç”¨One-Hot Encoderæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå³å¯¹ç‰¹å¾çš„ç¼–ç æ˜¯éšæœºçš„ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°å­—è¯ä¹‹é—´çš„å…³ç³»ã€‚å¦‚åŒ—äº¬ã€ä¸Šæµ·åº”è¯¥èšé›†åˆ°ä¸€èµ·ï¼Œåç››é¡¿ã€çº½çº¦èšé›†åœ¨ä¸€èµ·ã€‚å¹¶ä¸”æ•ˆç‡ä½ã€è®¡ç®—éº»çƒ¦ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯word2vec&quot;&gt;ä»€ä¹ˆæ˜¯Word2Vec&lt;/h3&gt;

&lt;p&gt;å¾ªç¯ç¥ç»ç½‘ç»œæ˜¯åœ¨NLPé¢†åŸŸæœ€å¸¸ä½¿ç”¨çš„ç¥ç»ç½‘ç»œï¼Œè€ŒWord2Vecåˆ™æ˜¯å°†è¯­è¨€ä¸­çš„å­—è¯è½¬åŒ–ä¸ºè®¡ç®—æœºå¯ä»¥ç†è§£çš„ç¨ å¯†å‘é‡ï¼ˆDense Vectorï¼‰ï¼Œé€šè¿‡ä¸€ä¸ªåµŒå…¥ç©ºé—´ä½¿å¾—è¯­ä¹‰ä¸Šç›¸ä¼¼çš„å•è¯åœ¨è¯¥ç©ºé—´å†…è·ç¦»å¾ˆè¿‘ã€‚&lt;/p&gt;

&lt;p&gt;Word2Vecåˆ†ä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CBOWï¼ˆContinuous Bag of Wordsï¼‰:ä»åŸå§‹è¯­å¥ï¼ˆä¾‹å¦‚ï¼šä¸­å›½çš„é¦–éƒ½æ˜¯____ï¼‰æ¨æµ‹ç›®æ ‡å­—è¯ï¼ˆä¾‹å¦‚ï¼šåŒ—äº¬ï¼‰

Skip-Gram:ä»ç›®æ ‡å­—è¯æ¨æµ‹å‡ºåŸå§‹è¯­å¥ï¼Œåœ¨å¤§å‹è¯­æ–™åº“ä¸­è¡¨ç°æ›´å¥½
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;è´Ÿé‡‡æ ·&lt;/code&gt;ï¼šåœ¨Word2Vecçš„CBOWæ¨¡å‹ä¸­ï¼Œåªè®­ç»ƒä¸€ä¸ªäºŒåˆ†ç±»æ¨¡å‹ï¼ŒåŒºåˆ†çœŸå®çš„ç›®æ ‡è¯æ±‡å’Œç¼–é€ çš„å™ªå£°è¯æ±‡ï¼ˆNegative Samplingï¼‰ã€‚åªéœ€è¦è®¡ç®—éšæœºé€‰æ‹©çš„kä¸ªè¯æ±‡è€Œå¹¶éå…¨éƒ¨ã€‚åœ¨å®é™…ä¸­ï¼Œä½¿ç”¨Noise-Contrastive Estimationï¼ˆNCEï¼‰Lossï¼Œåœ¨tfä¸­å¯¹åº”ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;tf.nn.nce_loss()&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;æ¨¡å‹æ‹†è§£&quot;&gt;æ¨¡å‹æ‹†è§£&lt;/h3&gt;

&lt;p&gt;Word2Vecæ¨¡å‹å…¶å®å°±æ˜¯ç®€å•åŒ–çš„ç¥ç»ç½‘ç»œï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/Word2Vec//1.jpg&quot; height=&quot;500&quot; width=&quot;800&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å›¾ç‰‡æ¥æº:&lt;a href=&quot;https://zhuanlan.zhihu.com/p/27234078&quot;&gt;ç†è§£ Word2Vec ä¹‹ Skip-Gram æ¨¡å‹&lt;/a&gt;,ä½œè€…å†™çš„è¶…çº§è¯¦ç»†ï¼Œå¯ä»¥å»è¯»è¯»ã€‚&lt;/p&gt;

&lt;p&gt;è¾“å…¥æ˜¯One-Hot Vectorã€‚
å¦‚æœæƒ³è¦ç”¨300ä¸ªç‰¹å¾æ¥è¡¨ç¤ºä¸€ä¸ªå•è¯ï¼Œåˆ™éšè—å±‚çš„ç»´åº¦ä¸º300ï¼Œä¸”Hidden Layeræ²¡æœ‰æ¿€æ´»å‡½æ•°ã€‚
Output Layerç»´åº¦è·ŸInput Layerçš„ç»´åº¦ä¸€æ ·ï¼Œç”¨çš„æ˜¯Softmaxå›å½’ï¼Œè¾“å‡ºæ¦‚ç‡åˆ†å¸ƒã€‚&lt;/p&gt;

&lt;p&gt;å°†ä»è¾“å…¥å±‚åˆ°éšå«å±‚çš„é‚£äº›æƒé‡ï¼Œä½œä¸ºæ¯ä¸€ä¸ªè¯æ±‡è¡¨ä¸­çš„è¯çš„å‘é‡ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºOne-Hot Vectorååˆ†ç¨€ç–ï¼Œæ¶ˆè€—å¤§é‡çš„è®¡ç®—èµ„æºã€‚ä¸ºäº†è¿›è¡Œé«˜æ•ˆè®¡ç®—ï¼Œåªè¦é€‰æ‹©é€‰æ‹©çŸ©é˜µä¸­å¯¹åº”çš„å‘é‡ä¸­ç»´åº¦å€¼ä¸º1çš„ç´¢å¼•è¡Œï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/Word2Vec//4.jpg&quot; height=&quot;150&quot; width=&quot;500&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å·¦è¾¹å‘é‡ä¸­å–å€¼ä¸º1çš„å¯¹åº”ç»´åº¦ä¸º3ï¼ˆä¸‹æ ‡ä»0å¼€å§‹ï¼‰ï¼Œé‚£ä¹ˆè®¡ç®—ç»“æœå°±æ˜¯çŸ©é˜µçš„ç¬¬3è¡Œï¼ˆä¸‹æ ‡ä»0å¼€å§‹ï¼‰â€”â€” [10, 12, 19]ï¼Œè¿™æ ·æ¨¡å‹ä¸­çš„éšå±‚æƒé‡çŸ©é˜µä¾¿æˆäº†ä¸€ä¸ªâ€æŸ¥æ‰¾è¡¨â€œï¼ˆlookup tableï¼‰&lt;/p&gt;

&lt;p&gt;è¯¦ç»†æ‹†è§£å‚è€ƒ&lt;a href=&quot;http://www.sohu.com/a/128794834_211120&quot;&gt;å¦‚æœçœ‹äº†æ­¤æ–‡è¿˜ä¸æ‡‚ Word2Vecï¼Œé‚£æ˜¯æˆ‘å¤ªç¬¨&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;CBOW&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å°†ä¸€ä¸ªè¯æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä¸­çš„è¯ä½œä¸ºè¾“å…¥ï¼Œè€Œé‚£ä¸ªè¯æœ¬èº«ä½œä¸ºè¾“å‡ºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œçœ‹åˆ°ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œå¸Œæœ›å¤§æ¦‚èƒ½çŒœå‡ºè¿™ä¸ªè¯å’Œå®ƒçš„æ„æ€ã€‚é€šè¿‡åœ¨ä¸€ä¸ªå¤§çš„è¯­æ–™åº“è®­ç»ƒï¼Œå¾—åˆ°ä¸€ä¸ªä»è¾“å…¥å±‚åˆ°éšå«å±‚çš„æƒé‡æ¨¡å‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç¬¬lä¸ªè¯çš„ä¸Šä¸‹æ–‡è¯æ˜¯iï¼Œjï¼Œkï¼Œé‚£ä¹ˆiï¼Œjï¼Œkä½œä¸ºè¾“å…¥ï¼Œå®ƒä»¬æ‰€åœ¨çš„è¯æ±‡è¡¨ä¸­çš„ä½ç½®çš„å€¼ç½®ä¸º1ã€‚ç„¶åï¼Œè¾“å‡ºæ˜¯lï¼ŒæŠŠå®ƒæ‰€åœ¨çš„è¯æ±‡è¡¨ä¸­çš„ä½ç½®çš„å€¼ç½®ä¸º1ã€‚è®­ç»ƒå®Œæˆåï¼Œå°±å¾—åˆ°äº†æ¯ä¸ªè¯åˆ°éšå«å±‚çš„æ¯ä¸ªç»´åº¦çš„æƒé‡ï¼Œå°±æ˜¯æ¯ä¸ªè¯çš„å‘é‡ã€‚ä¾‹å¦‚ç¬¬iä¸ªè¯çš„è¯å‘é‡ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;(Wi,1 Wi,2...Wi,m)&lt;/code&gt;,mä¸ºå‘é‡çš„ç»´åº¦ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/Word2Vec//2.jpeg&quot; height=&quot;500&quot; width=&quot;700&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Skip-gram&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å°†ä¸€ä¸ªè¯æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä¸­çš„è¯ä½œä¸ºè¾“å‡ºï¼Œè€Œé‚£ä¸ªè¯æœ¬èº«ä½œä¸ºè¾“å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç»™å‡ºä¸€ä¸ªè¯ï¼Œå¸Œæœ›é¢„æµ‹å¯èƒ½å‡ºç°çš„ä¸Šä¸‹æ–‡çš„è¯ã€‚é€šè¿‡åœ¨ä¸€ä¸ªå¤§çš„è¯­æ–™åº“è®­ç»ƒï¼Œå¾—åˆ°ä¸€ä¸ªä»è¾“å…¥å±‚åˆ°éšå«å±‚çš„æƒé‡æ¨¡å‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç¬¬lä¸ªè¯çš„ä¸Šä¸‹æ–‡è¯æ˜¯iï¼Œjï¼Œkï¼Œé‚£ä¹ˆiï¼Œjï¼Œkä½œä¸ºè¾“å‡ºï¼Œå®ƒä»¬æ‰€åœ¨çš„è¯æ±‡è¡¨ä¸­çš„ä½ç½®çš„å€¼ç½®ä¸º1ã€‚ç„¶åï¼Œè¾“å…¥æ˜¯lï¼ŒæŠŠå®ƒæ‰€åœ¨çš„è¯æ±‡è¡¨ä¸­çš„ä½ç½®çš„å€¼ç½®ä¸º1ã€‚è®­ç»ƒå®Œæˆåï¼Œå°±å¾—åˆ°äº†æ¯ä¸ªè¯åˆ°éšå«å±‚çš„æ¯ä¸ªç»´åº¦çš„æƒé‡ï¼Œå°±æ˜¯æ¯ä¸ªè¯çš„å‘é‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/Word2Vec//3.jpeg&quot; height=&quot;500&quot; width=&quot;700&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;tfå®ç°word2vec&quot;&gt;tfå®ç°Word2Vec&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨Skip-Gramæ¨¡å¼çš„Word2Vecï¼Œä»¥â€œthe quick brown fox jumped over the lazy dogâ€ä¸ºä¾‹ï¼Œè®­ç»ƒæ ·æœ¬ä¸º(quick,the)ï¼Œ(quick,brown),(brown,quick),(brown,fox)ç­‰ã€‚è®­ç»ƒæ—¶ï¼Œå¸Œæœ›æ¨¡å‹å¯ä»¥ä»ç›®æ ‡è¯æ±‡quickæ¨æµ‹å‡ºè¯­å¢ƒtheï¼ŒåŒæ—¶ä¹Ÿéœ€è¦åˆ¶é€ éšæœºçš„è¯æ±‡ä½œä¸ºè´Ÿæ ·æœ¬ï¼ˆå™ªå£°ï¼‰ã€‚ä½¿ç”¨SGDï¼ˆéšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ï¼‰æ¥æ›´æ–°æ¨¡å‹ä¸­Word Embeddingçš„å‚æ•°ï¼Œè®©æ¦‚ç‡åˆ†å¸ƒçš„æŸå¤±å‡½æ•°(NCE Loss)å°½å¯èƒ½å°ã€‚è¿™æ ·æ¯ä¸ªå•è¯çš„Embedded Vectorå°±ä¼šéšç€è®­ç»ƒè¿‡ç¨‹ä¸æ–­è°ƒæ•´ï¼Œç›´åˆ°å¤„äºä¸€ä¸ªæœ€åˆé€‚è¯­æ–™çš„ç©ºé—´ä½ç½®ã€‚&lt;/p&gt;

&lt;p&gt;åŸºæœ¬æ¯ä¸€å¥éƒ½æœ‰æ³¨é‡Šå•¦ï¼Œå¯ä»¥ç»“åˆåŸä¹¦æ¥çœ‹æ­¤æ®µä»£ç ğŸ˜³&lt;/p&gt;

&lt;p&gt;å•Šå•Šå•Šï¼Œæˆ‘æ‰‹å·¥å·§äº†ä¸€éä»£ç ï¼Œæ‰å‘ç°ä»£ç å±…ç„¶æ˜¯tfä¸Šçš„&lt;a href=&quot;https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/tutorials/word2vec/word2vec_basic.py&quot;&gt;demo&lt;/a&gt;â€¦&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;c&quot;&gt;# -*- coding: UTF-8 -*-&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;collections&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;math&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;random&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;zipfile&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;np&lt;/span&gt; 
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;tensorflow&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;tf&lt;/span&gt; 
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;urllib&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# ---------------------------  æ•°æ®é¢„å¤„ç†---------------------------&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'http://mattmahoney.net/dc/'&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   ä»â€˜http://mattmahoney.net/dcâ€™ä¸‹è½½æ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢çº¦æœ‰17005207ä¸ªç”¨ç©ºæ ¼åˆ†éš”å¥½çš„è‹±æ–‡å¥å­ã€‚&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;maybe_download&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expected_bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;urllib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;urlretrieve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;statinfo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;statinfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_bytes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Found and verified'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statinfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;st_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;'Failed to verify'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'. Can you get to it with a browser?'&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maybe_download&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text8.zip&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;31344016&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   filename = &quot;text8.zip&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#   è§£å‹æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨`tf.compat.as_str`å°†æ•°æ®è½¬åŒ–æˆå•è¯åˆ—è¡¨ã€‚&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;read_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zipfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZipFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;as_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;namelist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Data size'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#   åˆ›å»ºvocabularyè¯æ±‡è¡¨,é€‰å–å‰50000é¢‘æ•°çš„å•è¯ï¼Œå…¶ä½™å•è¯è®¤å®šä¸ºUnknownï¼Œç¼–å·ä¸º0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;vocabulary_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50000&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;build_dataset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'UNK'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;---------------------------------&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   collections.Counterç»Ÿè®¡å•è¯åˆ—è¡¨ä¸­å•è¯çš„é¢‘æ•°&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   most_common å–top 50000é¢‘æ•°çš„å•è¯ä½œä¸ºvocabulary&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   count = [(å•è¯1,è¯é¢‘1),(å•è¯2,è¯é¢‘2),...]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;collections&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;most_common&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vocabulary_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   å­˜å…¥dicä¸­&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  

    &lt;span class=&quot;c&quot;&gt;#   éå†å•è¯åˆ—è¡¨ï¼Œå¦‚æœå‡ºç°åœ¨dictionaryä¸­ï¼Œåˆ™è½¬åŒ–ä¸ºç¼–å·ã€‚ä¸åœ¨åˆ™ä¸º0ã€‚&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;unk_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;unk_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unk_count&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   å­—å…¸çš„åè½¬å½¢å¼ï¼Œå¯ç”¨ç¼–å·æŸ¥è¯¢å‡ºå¯¹åº”çš„å•è¯&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_dataset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   åˆ é™¤åŸå§‹å•è¯åˆ—è¡¨ï¼ŒèŠ‚çº¦å†…å­˜&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;del&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   æ‰“å°æœ€é«˜é¢‘å‡ºç°çš„è¯æ±‡åŠæ•°é‡ï¼Œ[['UNK', 418391], ('the', 1061396), ('of', 593677), ('and', 416629), ('one', 411764)]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Most common words (+UNK)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   æ‰“å°dataå‰10ä¸ªå•è¯&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Sample data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#   ---------------------------ç”ŸæˆWord2Vecçš„è®­ç»ƒæ ·æœ¬---------------------------&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   ä½¿ç”¨Skip-Gramæ¨¡å¼ï¼Œå°†åŸå§‹æ•°æ®ï¼š&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   â€œthe quick brown fox jumped over the lazy dogâ€è½¬åŒ–ä¸ºï¼š&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   (quick,the)ï¼Œ(quick,brown),(brown,quick),(brown,fox)ç­‰ã€‚&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;data_index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generate_batch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;#  ç”Ÿæˆè®­ç»ƒç”¨çš„batchæ•°æ®&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   skip_window å•è¯æœ€è¿œå¯ä»¥è”ç³»çš„è·ç¦»&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   num_skips å¯¹æ¯ä¸ªå•è¯ç”Ÿæˆå¤šå°‘æ ·æœ¬&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;global&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data_index&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;#   å®šä¹‰ä¸ºå…¨å±€å˜é‡ï¼Œå› ä¸ºä¼šåå¤è°ƒç”¨æ­¤å‡½æ•°&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   batch_size å¿…é¡»ä¸ºnum_skipsçš„æ•´æ•°å€ï¼Œç¡®ä¿æ¯ä¸ªbatchåŒ…å«ä¸€ä¸ªè¯æ±‡å¯¹åº”çš„æ‰€æœ‰æ ·æœ¬&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;  
    &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   ndarrayå¯¹è±¡æ˜¯ç”¨äºå­˜æ”¾åŒç±»å‹å…ƒç´ çš„å¤šç»´æ•°ç»„&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;batch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ndarray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dtype&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;int32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ndarray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dtype&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;int32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   æŸä¸ªå•è¯åˆ›å»ºæ ·æœ¬æ—¶ä¼šä½¿ç”¨åˆ°çš„å•è¯æ•°é‡,åŒ…æ‹¬å•è¯æœ¬èº«å’Œå®ƒå‰åçš„å•è¯&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;span&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   åŒå‘é˜Ÿåˆ—ï¼Œä½¿ç”¨appendæ–¹æ³•æ·»åŠ å˜é‡æ—¶ï¼Œåªä¼šä¿ç•™æœ€åæ’å…¥spanä¸ªå˜é‡&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;buffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;collections&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deque&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maxlen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;c&quot;&gt;#   ä»åºå·data_indexå¼€å§‹ï¼ŒæŠŠspanä¸ªå•è¯é¡ºåºè¯»å…¥bufferä½œä¸ºåˆå§‹å€¼&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;data_index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# // ä¸ºæ•´æ•°é™¤æ³•&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;#   bufferä¸­ç¬¬skip_windowä¸ªå˜é‡ä¸ºç›®æ ‡å•è¯&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;targets_to_avoid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;#   ç”Ÿæˆæ ·æœ¬æ—¶éœ€è¦é¿å…çš„å•è¯åˆ—è¡¨&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;targets_to_avoid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;randint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;targets_to_avoid&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;batch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;data_index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;batch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#   ç®€å•æµ‹è¯•åŠŸèƒ½&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;batch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generate_batch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]],&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'-&amp;gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#   è®­ç»ƒæ•°æ®&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;embedding_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# å•è¯è½¬ä¸ºç¨ å¯†å‘é‡çš„ç»´åº¦ï¼Œä¸€èˆ¬æ˜¯50~1000&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;     &lt;span class=&quot;c&quot;&gt;# å•è¯é—´æœ€è¿œå¯ä»¥è”ç³»çš„è·ç¦» &lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;# æ¯ä¸ªç›®æ ‡å•è¯æå–çš„æ ·æœ¬æ•°&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#   éªŒè¯æ•°æ®ï¼ŒéšæœºæŠ½å–ä¸€äº›é¢‘æ•°æœ€é«˜çš„å•è¯ï¼Œçœ‹å‘é‡ç©ºé—´ä¸Šè·Ÿå®ƒä»¬æœ€è¿‘çš„å•è¯æ˜¯å¦ç›¸å…³æ€§æ¯”è¾ƒé«˜&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;valid_size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;     &lt;span class=&quot;c&quot;&gt;# æŠ½å–çš„éªŒè¯å•è¯æ•°&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;valid_window&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# éªŒè¯å•è¯åªä»é¢‘æ•°æœ€é«˜çš„100ä¸ªå•è¯ä¸­æŠ½å–&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;valid_examples&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;choice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;valid_window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;valid_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;num_sampled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# è®­ç»ƒæ—¶ç”¨æ¥åšè´Ÿæ ·æœ¬çš„å™ªå£°å•è¯çš„æ•°é‡&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#   ---------------------------å®šä¹‰Skip-Gramæ¨¡å‹çš„ç½‘ç»œç»“æ„---------------------------&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Graph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;as_default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;train_inputs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;int32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;train_labels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;int32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   å°†éšæœºäº§ç”Ÿçš„valid_examplesè½¬æ¢ä¸ºconstant&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;valid_dataset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;constant&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;valid_examples&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dtype&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;int32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;device&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/cpu:0'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#   tf.random_uniforméšæœºç”Ÿæˆæ‰€æœ‰å•è¯çš„è¯å‘é‡embeddings,å•è¯è¡¨å¤§å°ä¸º50000ï¼Œå‘é‡ç»´åº¦ä¸º128&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;embeddings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random_uniform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vocabulary_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embedding_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#   tf.nn.embedding_lookup æŸ¥æ‰¾è¾“å…¥train_inputså¯¹åº”çš„å‘é‡&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;embed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embedding_lookup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embeddings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#   ä½¿ç”¨NCE Lossä½œä¸ºè®­ç»ƒçš„ä¼˜åŒ–ç›®æ ‡&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;nce_weights&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;truncated_normal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vocabulary_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embedding_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
                                &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embedding_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;nce_biases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;zeros&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vocabulary_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   lossçš„è®¡ç®—æ–¹å¼&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reduce_mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nce_loss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weights&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nce_weights&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                         &lt;span class=&quot;n&quot;&gt;biases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nce_biases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                         &lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train_labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                         &lt;span class=&quot;n&quot;&gt;inputs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;embed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                         &lt;span class=&quot;n&quot;&gt;num_sampled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num_sampled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                         &lt;span class=&quot;n&quot;&gt;num_classes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vocabulary_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#   å®šä¹‰ä¼˜åŒ–å™¨ä¸ºSGDï¼Œlrä¸º1.0&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;optimizer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GradientDescentOptimizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minimize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   è®¡ç®—åµŒå…¥å‘é‡embeddingsçš„L2èŒƒæ•°norm&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;norm&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reduce_sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;square&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embeddings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keep_dims&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   è§„èŒƒåŒ–&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;normalized_embeddings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;embeddings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;norm&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   tf.nn.embedding_lookup æŸ¥è¯¢éªŒè¯å•è¯çš„åµŒå…¥å‘é‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;valid_embeddings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;embedding_lookup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;normalized_embeddings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valid_dataset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   è®¡ç®—éªŒè¯å•è¯çš„åµŒå…¥å‘é‡ä¸è¯æ±‡è¡¨ä¸­æ‰€æœ‰å•è¯çš„ç›¸ä¼¼æ€§&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;similarity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matmul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;valid_embeddings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;normalized_embeddings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transpose_b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#   åˆå§‹åŒ–æ‰€æœ‰æ¨¡å‹å‚æ•°&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;global_variables_initializer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#   æœ€å¤§çš„è¿­ä»£æ¬¡æ•°&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;num_steps&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100001&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;graph&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Initialized&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;average_loss&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_steps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;#   ç”Ÿæˆä¸€ä¸ªbatchçš„inputså’Œlabelsæ•°æ®&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;batch_inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_labels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generate_batch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;num_skips&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skip_window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;feed_dict&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_inputs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;batch_labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loss_val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optimizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;feed_dict&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;feed_dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;average_loss&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loss_val&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# 2000æ­¤å¾ªç¯ï¼Œè®¡ç®—ä¸€ä¸‹å¹³å‡losså¹¶æ˜¾ç¤ºå‡ºæ¥&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;average_loss&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2000&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Average loss at step &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;average_loss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;average_loss&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

        &lt;span class=&quot;c&quot;&gt;# æ¯10000æ¬¡å¾ªç¯ï¼Œè®¡ç®—ä¸€æ¬¡éªŒè¯å•è¯ä¸å…¨éƒ¨å•è¯çš„ç›¸ä¼¼åº¦ï¼Œå¹¶å°†æœ€ç›¸ä¼¼çš„8ä¸ªå•è¯å±•ç¤ºå‡ºæ¥&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;similarity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;valid_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;valid_word&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;valid_examples&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;top_k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;nearest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,:])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argsort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top_k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;log_str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Nearest to &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valid_word&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;top_k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;close_word&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nearest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
                &lt;span class=&quot;c&quot;&gt;#close_word = reverse_dictionary.get(nearest[k])&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;log_str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;s ,&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;close_word&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;final_embeddings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;normalized_embeddings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#   ---------------------------å¯è§†åŒ–---------------------------&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# low_dim_embs æ˜¯é™ç»´åˆ°2ç»´çš„å•è¯çš„ç©ºé—´å‘é‡ï¼Œåœ¨å›¾è¡¨ä¸­å±•ç¤ºæ¯ä¸ªå•è¯çš„ä½ç½®&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;plot_with_labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;low_dim_embs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'tsne.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;low_dim_embs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;More labels than embeddings&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;figsize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;low_dim_embs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,:]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scatter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# æ˜¾ç¤ºæ•£ç‚¹å›¾ï¼ˆå•è¯çš„ä½ç½®ï¼‰&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# plt.annotateä¸ºå•è¯æœ¬èº«&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;annotate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;     
                     &lt;span class=&quot;n&quot;&gt;xy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                     &lt;span class=&quot;n&quot;&gt;xytext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                     &lt;span class=&quot;n&quot;&gt;textcoords&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'offset points'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                     &lt;span class=&quot;n&quot;&gt;ha&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'right'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                     &lt;span class=&quot;n&quot;&gt;va&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'bottom'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savefig&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;#   ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# é™ç»´,å°†åŸå§‹çš„128ç»´åµŒå…¥å‘é‡é™åˆ°2ç»´ï¼Œå±•ç¤ºè¯é¢‘æœ€é«˜çš„100ä¸ªå•è¯&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sklearn.manifold&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TSNE&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;tsne&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TSNE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;perplexity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n_components&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pca&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n_iter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plot_only&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;low_dim_embs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tsne&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit_transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;final_embeddings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot_only&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,:])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reverse_dictionary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot_only&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plot_with_labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;low_dim_embs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

</description>
        <pubDate>Sat, 10 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/03/Word2Vec/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/Word2Vec/</guid>
        
        <category>AI</category>
        
        
      </item>
    
      <item>
        <title>ç½‘ä¸Šæœé›†çš„ä¸€äº›å®‰å…¨å²—é¢è¯•é—®é¢˜--åŒæºç­–ç•¥ä¸è·¨åŸŸ</title>
        <description>&lt;h3 id=&quot;æ€ä¹ˆåˆè¦å¼€å§‹å‡†å¤‡é¢è¯•äº†&quot;&gt;æ€ä¹ˆåˆè¦å¼€å§‹å‡†å¤‡é¢è¯•äº†&lt;/h3&gt;
&lt;p&gt;ä¸Šæ¬¡å‡†å¤‡é¢è¯•è¿˜æ˜¯15å¹´å¤§ä¸‰çš„æ—¶å€™å•Šï¼ŒçœŸå¿ƒæ˜¯ä»€ä¹ˆéƒ½ä¸æ‡‚ï¼ˆè™½ç„¶ç°åœ¨ä¹Ÿæ˜¯â€¦ä¼šç”¨wampå»ºä¸ªç«™å°±æŠ•äº†å®‰å…¨å²—å•Š233â€¦æˆ‘çœŸæ˜¯å“ªé‡Œæ¥çš„å‹‡æ°”â€¦
ä»Šå¤©çœ‹åˆ°å½“å¹´æŠ•é˜¿é‡Œå†™çš„åœ¨çº¿ç®€å†ï¼ŒçœŸæ˜¯æƒ¨ä¸å¿ç¹ï¼Œä¼°è®¡å½“æ—¶HRçœ‹åˆ°äº†ä»¥ä¸ºæˆ‘æ˜¯åœ¨æç¬‘å§ğŸ¤£&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ€»ç»“çš„å†…å®¹éƒ½æ¯”è¾ƒç®€ç•¥ï¼Œå¯èƒ½æ˜¯æ‘˜æŠ„äº†ã€Šç™½å¸½å­ã€‹ï¼Œå¯èƒ½æ˜¯ç½‘ä¸Šæœé›†çš„èµ„æ–™ï¼Œæˆ–è€…ç›´æ¥ç»™å‡ºäº†åˆ«äººæ€»ç»“çš„å¾ˆå¥½çš„æ–‡ç« ä¾›ä»¥åæŸ¥çœ‹ï¼Œå› ä¸ºæ¯ä¸ªç‚¹å±•å¼€æ¥å°†éƒ½å¯ä»¥å†™å¥½å‡ ç¯‡æ–‡ç« ï¼ˆå—¯ï¼Œä¸ºè‡ªå·±å·æ‡’æ‰¾å€Ÿå£&lt;/p&gt;

&lt;p&gt;ç„¶åï¼ŒæŠŠCHYbetaå¤§ç¥çš„&lt;a href=&quot;https://github.com/CHYbeta/Web-Security-Learning&quot;&gt;Web-Security-Learning&lt;/a&gt;è¿‡ä¸€éğŸ˜³ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥&quot;&gt;ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥&lt;/h3&gt;

&lt;p&gt;æºå°±æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;[ä¸»æœºï¼Œåè®®ï¼Œç«¯å£å]&lt;/code&gt;çš„ä¸€ä¸ªä¸‰å…ƒç»„ã€‚
ï¼ˆæ­¤å¤–ï¼Œcookieçš„åŒæºç­–ç•¥æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;[ä¸»æœºï¼Œç«¯å£å]&lt;/code&gt;ï¼Œä¸åŒ…å«åè®®ï¼Œå› æ­¤å¯ä»¥ç”¨httpçš„cookieå»è¦†ç›–httpsçš„cookieã€‚ï¼‰&lt;/p&gt;

&lt;p&gt;åŒæºç­–ç•¥(Same Origin Policy, SOP)ï¼šé™åˆ¶äº†æ¥è‡ªä¸åŒæºçš„â€documentâ€œæˆ–è€…è„šæœ¬ï¼Œå¯¹å½“å‰â€documentâ€œè¯»å–æˆ–è€…è®¾ç½®æŸäº›å±æ€§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;script&amp;gt;ã€&amp;lt;img&amp;gt;ã€&amp;lt;iframe&amp;gt;ã€&amp;lt;link&amp;gt;&lt;/code&gt;ç­‰æ ‡ç­¾éƒ½å¯ä»¥è·¨åŸŸåŠ è½½èµ„æºï¼Œè€Œä¸å—åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œä½†æ˜¯æµè§ˆå™¨é™åˆ¶äº†JSçš„æƒé™ï¼Œä½¿å…¶ä¸èƒ½è¯»ã€å†™è¿”å›çš„èµ„æºã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;XMLHttpRequest&lt;/code&gt;ä¸å¯ä»¥è·¨åŸŸåŠ è½½èµ„æºï¼Œä½†æ˜¯å¯ä»¥è¯»å†™èµ„æºã€‚å¦‚æœå¯ä»¥è·¨åŸŸï¼Œåˆ™ä¼šå¯¼è‡´ä¸€äº›æ•æ„Ÿæ•°æ®çš„æ³„æ¼ï¼Œå¦‚CSRF Tokenã€‚&lt;/p&gt;

&lt;p&gt;XHRéœ€è¦æ ¹æ®&lt;code class=&quot;highlighter-rouge&quot;&gt;ç›®æ ‡åŸŸ&lt;/code&gt;è¿”å›çš„HTTPå¤´æ¥æˆæƒæ˜¯å¦å…è®¸è·¨åŸŸè®¿é—®ï¼Œå› ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;JSæ— æ³•æ§åˆ¶HTTPå¤´&lt;/code&gt;ï¼ˆè¿™ç‚¹éå¸¸é‡è¦å•Šå•Šå•Šå•Šå•Šå•Šï¼ŒğŸ‘»ğŸ‘½ğŸ’€ğŸ¤–ğŸ‘ğŸ‘ğŸ‘ï¼‰ã€‚XSSåœ¨æ²¡æœ‰å…¶ä»–è¾…åŠ©çš„æƒ…å†µä¸‹ä¹Ÿæ— æ³•æ§åˆ¶HTTPå¤´å•Šå•Šå•Šå•Šã€‚&lt;/p&gt;

&lt;p&gt;é™¤äº†DOMã€Cookieã€XHRå—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œç¬¬ä¸‰æ–¹æ’ä»¶å¦‚Flashï¼ˆcrossdomain.xmlã€MIMEï¼‰ã€Javaã€Appletç­‰éƒ½æœ‰è‡ªå·±çš„åŒæºç­–ç•¥ã€‚&lt;/p&gt;

&lt;p&gt;è·¨åŸŸçš„æ–¹å¼ä¸»è¦æœ‰ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CORS
CSP
JSONP
postMessage
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;cross-origin-resource-sharingcors&quot;&gt;Cross-origin Resource Sharing(CORS)&lt;/h3&gt;

&lt;p&gt;ä¾‹å¦‚ä»&lt;code class=&quot;highlighter-rouge&quot;&gt;http://www.a.com/test.html&lt;/code&gt;å‘èµ·å¯¹&lt;code class=&quot;highlighter-rouge&quot;&gt;http://www.b.com/test.php&lt;/code&gt;çš„è¯·æ±‚ï¼Œè¯·æ±‚å¤´ä¸­åŒ…å«&lt;code class=&quot;highlighter-rouge&quot;&gt;origin:http://www.a.com&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ï¼ˆorigin header å¯ä»¥ç”¨äºé˜²èŒƒCSRFï¼Œä¸åƒReferé‚£ä¹ˆå®¹æ˜“è¢«ä¼ªé€ æˆ–æ¸…ç©ºï¼Œæ­¤å¤„çš„refereræ€ä¹ˆæ”¹ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼ŸğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ï¼‰&lt;/p&gt;

&lt;p&gt;å¦‚æœwww.b.comè¿”å›çš„http Headerä¸­åŒ…å«ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;Access control allow origin:http://www.a.com&lt;/code&gt;,åˆ™è¡¨ç¤ºè¿™ä¸ªè·¨åŸŸè¯·æ±‚è¢«é€šè¿‡ã€‚ï¼ˆä¸‹å›¾æ˜¯å›¾ç³™ç†ä¸ç³™å•Šå•Šå•Š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/SOP/ACAO.png&quot; height=&quot;250&quot; width=&quot;450&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ ‡å‡†ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Access-Control-Allow-Origin
Access-Control-Allow-Methods
Access-Control-Allow-Headers
Access-Control-Max-Age
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;content-security-policycsp&quot;&gt;Content Security Policy(CSP)&lt;/h3&gt;

&lt;p&gt;ç”±æœåŠ¡å™¨è¿”å›ä¸€ä¸ªHTTPå¤´ï¼Œå¹¶åœ¨å…¶ä¸­æè¿°é¡µé¢è¯¥éµå®ˆçš„å®‰å…¨ç­–ç•¥ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;X-Content-Security-Policy:allow 'self' *.mydomain.com    // æµè§ˆå™¨å°†ä¿¡ä»»æ¥è‡ªmydomain.comåŠå…¶å­åŸŸåä¸‹é¢çš„å†…å®¹
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;CSPçš„å®è´¨ä¸ºç™½åå•ï¼Œåœ¨æµè§ˆå™¨å±‚é¢åšçš„é˜²æŠ¤ï¼Œæ˜¯å’ŒåŒæºç­–ç•¥åŒä¸€çº§åˆ«ï¼Œé™¤éæµè§ˆå™¨æœ¬èº«å‡ºç°æ¼æ´ï¼Œå¦åˆ™ä¸å¯èƒ½ä»æœºåˆ¶ä¸Šç»•è¿‡ã€‚
CSPåªå…è®¸è¢«è®¤å¯çš„JSå—ã€JSæ–‡ä»¶ã€CSSç­‰è§£æï¼Œåªå…è®¸å‘æŒ‡å®šçš„åŸŸå‘èµ·è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;CSPæ€ä¹ˆèƒ½æœ‰è¿™ä¹ˆå¤šå§¿åŠ¿â€¦&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://jaq.alibaba.com/community/art/show?spm=a313e.7916646.24000001.49.ZP8rXN&amp;amp;articleid=518&quot;&gt;Content Security Policy å…¥é—¨æ•™ç¨‹&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://paper.seebug.org/423/&quot;&gt;å‰ç«¯é˜²å¾¡ä»å…¥é—¨åˆ°å¼ƒå‘â€“CSPå˜è¿&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;jsonpåªæ”¯æŒgetè¯·æ±‚&quot;&gt;JSONP(åªæ”¯æŒgetè¯·æ±‚)&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;JSONP(JSON with Padding)&lt;/code&gt;æ˜¯ä¸€ä¸ªç®€å•é«˜æ•ˆçš„è·¨åŸŸæ–¹å¼ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå¸¦callbackçš„jsonã€‚åˆ©ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt;æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„â€œæ¼æ´â€ï¼ˆå†å²é—è¿¹å•Šï¼‰æ¥è¾¾åˆ°ä¸ç¬¬ä¸‰æ–¹é€šè®¯çš„ç›®çš„ã€‚
å‚è€ƒ&lt;a href=&quot;https://www.zhihu.com/question/19966531/answer/13502030&quot;&gt;çŸ¥ä¹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;å½“éœ€è¦é€šè®¯æ—¶ï¼Œæœ¬ç«™è„šæœ¬åˆ›å»ºä¸€ä¸ª&amp;lt;script&amp;gt;å…ƒç´ ï¼Œåœ°å€æŒ‡å‘ç¬¬ä¸‰æ–¹çš„APIç½‘å€ï¼Œå½¢å¦‚:

    &amp;lt;script src=&quot;http://www.example.net/api?param1=1&amp;amp;param2=2&quot;&amp;gt;&amp;lt;/script&amp;gt;

å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®ï¼ˆå‡½æ•°åå¯çº¦å®šï¼Œæˆ–é€šè¿‡åœ°å€å‚æ•°ä¼ é€’ï¼‰ã€‚     

ç¬¬ä¸‰æ–¹äº§ç”Ÿçš„å“åº”ä¸ºjsonæ•°æ®çš„åŒ…è£…ï¼ˆæ•…ç§°ä¹‹ä¸ºjsonpï¼Œå³json paddingï¼‰ï¼Œå½¢å¦‚ï¼š     

    callback({&quot;name&quot;:&quot;hax&quot;,&quot;gender&quot;:&quot;Male&quot;})     

è¿™æ ·æµè§ˆå™¨ä¼šè°ƒç”¨callbackå‡½æ•°ï¼Œå¹¶ä¼ é€’è§£æåjsonå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚æœ¬ç«™è„šæœ¬å¯åœ¨callbackå‡½æ•°é‡Œå¤„ç†æ‰€ä¼ å…¥çš„æ•°æ®ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;JSONPæ˜¯CSPçš„å…‹æ˜Ÿ&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script src=&quot;/path/jsonp?callback=alert(document.domain)//&quot;&amp;gt; &amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;postmessage&quot;&gt;postMessage&lt;/h3&gt;

&lt;p&gt;postMessageå…è®¸æ¯ä¸€ä¸ªwindowï¼ˆåŒ…æ‹¬å½“å‰çª—å£ã€å¼¹å‡ºçª—å£ã€iframeç­‰ï¼‰å¯¹è±¡å¾€å…¶ä»–çš„çª—å£å‘é€æ–‡æœ¬æ¶ˆæ¯ï¼Œä»è€Œå®ç°è·¨çª—å£çš„æ¶ˆæ¯ä¼ é€’ï¼Œä¸å—åŒæºç­–ç•¥é™åˆ¶ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åŒæºæ”»é˜²&quot;&gt;åŒæºæ”»é˜²&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.anquanke.com/post/id/86078&quot;&gt;æ¼«è°ˆåŒæºç­–ç•¥æ”»é˜²&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;å¯¹URIçš„è§£æï¼š&lt;/p&gt;

    &lt;p&gt;åœ¨æŸäº›æµè§ˆå™¨å¯¹URIçš„è§£é‡Šå­˜åœ¨æ¼æ´çš„æ—¶å€™ï¼Œå¯ä»¥æ„é€ ç›¸åº”çš„æ”»å‡»è¿ç»•è¿‡SOP&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;è®¾è®¡ç¼ºé™·ç»•è¿‡SOPï¼š&lt;/p&gt;

    &lt;p&gt;åœ¨Java6ï¼Œ7ä¸­ï¼Œå¦‚æœä¸¤ä¸ªåŸŸåè§£æåˆ°ç›¸åŒçš„IPï¼Œåˆ™ä¼šè®¤ä¸ºä»–ä»¬åŒæºã€‚å‡è®¾æˆ‘ä»¬æœ‰attacker.comå’Œvictim.com,ä¸¤è€…éƒ½å…±äº«ä¸»æœº123.123.123.123ã€‚æ”»å‡»è€…attacker.comå¯ä»¥åœ¨è‡ªå·±æ§åˆ¶çš„åŸŸåä¸‹ä¸Šä¼ ä¸€ä¸ªjaræ–‡ä»¶æ¥è®¿é—®victim.comçš„å†…å®¹ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;è®¿é—®æœ¬åœ°æ–‡ä»¶çš„åŒæºç­–ç•¥&lt;/p&gt;

    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;frame src=&quot;/home/user/dir/2.html&quot;&amp;gt;&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;frame src=&quot;/home/user/2.html&quot;&amp;gt;&lt;/code&gt;&lt;/p&gt;

    &lt;p&gt;1.htmlä¸2.htmlè§†ä¸ºåŒæº&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ç‰¹ç«‹ç‹¬è¡Œçš„IEï¼š&lt;/p&gt;

    &lt;p&gt;TrustZonesï¼ˆä¿¡ä»»åŸŸï¼‰ï¼šå½“ä¸€ä¸ªURIè¢«åŠ å…¥åˆ°äº†IEçš„ä¿¡ä»»ç½‘ç«™åŒºåŸŸä¸­æ—¶ï¼Œæµè§ˆå™¨ä¼šæ— è§†åŒæºç­–ç•¥ã€‚&lt;/p&gt;

    &lt;p&gt;IEåœ¨è€ƒè™‘åŒæºç­–ç•¥æ—¶ä¸åŒ…æ‹¬ç«¯å£ï¼Œ è¿™æ„å‘³ç€ä¸åŒç«¯å£ä¸Šçš„åº”ç”¨ç¨‹åºå¯ä»¥è¯»å–åˆ°æ¯”å¦‚ç”¨æˆ·çš„ç™»é™†è´¦æˆ·å¯†ç /cookieç­‰ã€‚&lt;/p&gt;

    &lt;p&gt;é€šè¿‡å˜æ›´è‡ªèº«çš„æºç»•è¿‡åŒæºç­–ç•¥ï¼šIE 6ï¼Œ7ç‰ˆä¸­ç½‘é¡µå¯ä»¥é€šè¿‡document.domainè®¾ç½®è‡ªèº«çš„æ¥æºä¸ºä»»æ„å…¶ä»–æ¥æº&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;é˜²å¾¡&quot;&gt;é˜²å¾¡&lt;/h3&gt;
&lt;p&gt;æœ€å¥½çš„é˜²å¾¡æ–¹å¼åˆ™æ˜¯è®¾ç½®CORS&lt;/p&gt;

&lt;p&gt;ç¦æ­¢è·¨åŸŸå†™ï¼Œå¼•å…¥CSRFä»¤ç‰Œï¼Œä¸”å¿…é¡»æ­£ç¡®çš„é…ç½®åŒæºç­–ç•¥ï¼Œå¦åˆ™ä»¤ç‰Œä¹Ÿä¼šè¢«è¯»å–ã€‚&lt;/p&gt;

&lt;p&gt;ç¦æ­¢è·¨åŸŸè¯»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®&lt;code class=&quot;highlighter-rouge&quot;&gt;X-Frame-Options&lt;/code&gt;å¤´æ¥ç¦æ­¢è¯¥é¡µé¢è¢«åµŒå…¥åˆ°æ¶æ„é¡µé¢ä¸­&lt;/p&gt;

&lt;p&gt;ç¦æ­¢è·¨åŸŸåµŒå…¥ï¼Œæ¯”å¦‚&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;script data-original=&amp;gt;&amp;lt;/script&amp;gt;&lt;/code&gt;ã€ &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;img data-original=x&amp;gt;&amp;lt;/img&amp;gt;&lt;/code&gt;ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;svg onload=&amp;gt;&lt;/code&gt;ï¼Œå„ç§å­—ä½“åŠ è½½ç­‰ç­‰ã€‚åŒæ—¶ï¼Œä½¿ç”¨CSRFä»¤ç‰Œä¹Ÿå¯ä»¥æœ‰æ•ˆé¿å…è¢«è·¨åŸŸåµŒå…¥ã€‚&lt;/p&gt;

</description>
        <pubDate>Tue, 06 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/03/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E7%9B%B8%E5%85%B3/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5%E7%9B%B8%E5%85%B3/</guid>
        
        <category>Sec</category>
        
        
      </item>
    
      <item>
        <title>æ–‡å­—æ¡†é€‰ç›¸å…³é—®é¢˜(R-CNN,SPPNET,Fast R-CNN,Faster R-CNN,CTPN,YOLO )</title>
        <description>&lt;h3 id=&quot;æ•°æ®é›†&quot;&gt;æ•°æ®é›†&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/tzutalin/labelImg&quot;&gt;å›¾ç‰‡æ¡†é€‰ä¸æ ‡æ³¨å·¥å…·&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/æ¡†é€‰//1.jpg&quot; height=&quot;350&quot; width=&quot;600&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;ImageNet ILSVC 2012:    æ ‡å®šæ¯å¼ å›¾ç‰‡ä¸­ç‰©ä½“çš„ç±»åˆ«ã€‚ä¸€åƒä¸‡å›¾åƒï¼Œ1000ç±»&lt;/p&gt;

    &lt;p&gt;PASCAL VOC 2007:        æ ‡å®šæ¯å¼ å›¾ç‰‡ä¸­ï¼Œç‰©ä½“çš„ç±»åˆ«å’Œä½ç½®ï¼Œä¸€ä¸‡å›¾åƒï¼Œ20ç±»&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;r-cnn&quot;&gt;R-CNN&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªåšä¸»å†™çš„æ–‡ç« ï¼ŒçœŸçš„æ˜¯å¾ˆæ¸…æ™°å•Šï¼ŒæŠŠæ‰€æœ‰ä¸æ¸…æ¥šçš„åè¯éƒ½è§£é‡Šå¥½äº†~&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/23006190?refer=xiaoleimlnote&quot;&gt;RCNN- å°†CNNå¼•å…¥ç›®æ ‡æ£€æµ‹çš„å¼€å±±ä¹‹ä½œ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/WoPawn/article/details/52133338&quot;&gt;R-CNNè®ºæ–‡è¯¦è§£&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ­¥éª¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;1.  å€™é€‰åŒºåŸŸç”Ÿæˆï¼š ä¸€å¼ å›¾åƒç”Ÿæˆ1K~2Kä¸ªå€™é€‰åŒºåŸŸ ï¼ˆé‡‡ç”¨Selective Search æ–¹æ³•ï¼‰

2.  ç‰¹å¾æå–ï¼š å¯¹æ¯ä¸ªå€™é€‰åŒºåŸŸï¼Œä½¿ç”¨æ·±åº¦å·ç§¯ç½‘ç»œæå–ç‰¹å¾ ï¼ˆCNNï¼‰ 

3.  ç±»åˆ«åˆ¤æ–­ï¼š ç‰¹å¾é€å…¥æ¯ä¸€ç±»çš„SVM åˆ†ç±»å™¨ï¼Œåˆ¤åˆ«æ˜¯å¦å±äºè¯¥ç±» 

4.  ä½ç½®ç²¾ä¿®ï¼š ä½¿ç”¨å›å½’å™¨ç²¾ç»†ä¿®æ­£å€™é€‰æ¡†ä½ç½® 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/æ¡†é€‰//RCNN.png&quot; height=&quot;200&quot; width=&quot;500&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;selective searchï¼šæ ¹æ®ä¸€å®šçš„è§„åˆ™é€‰å‡ºå€™é€‰åŒºåŸŸ

é‡å åº¦ï¼ˆIOUï¼‰ï¼šä¸¤ä¸ªBBXçš„é‡å åº¦ï¼Œå³çŸ©å½¢æ¡†Aã€Bçš„é‡å é¢ç§¯å Aã€Bå¹¶é›†çš„é¢ç§¯æ¯”ä¾‹
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/æ¡†é€‰//IOU.png&quot; height=&quot;300&quot; width=&quot;500&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;éæå¤§å€¼æŠ‘åˆ¶ï¼ˆNMSï¼‰ï¼šä¸€å¼ å›¾ç‰‡ä¸­æ‰¾å‡ºNä¸ªå¯èƒ½æ˜¯åŒä¸€ç‰©ä½“çš„çŸ©å½¢æ¡†ï¼Œéœ€è¦åˆ¤åˆ«å“ªäº›æ¡†æ˜¯æ²¡æœ‰ç”¨çš„

VOCç‰©ä½“æ£€æµ‹ä»»åŠ¡ï¼šå¦‚æœæŸæ•°æ®é›†åŒ…å«äº†20ä¸ªç‰©ä½“ç±»åˆ«ï¼Œåˆ™è¿˜éœ€è¦åŠ ä¸ŠèƒŒæ™¯ç±»ï¼Œæ€»å…±21ç±»
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;sppnet&quot;&gt;SPPNet&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/24774302?refer=xiaoleimlnote&quot;&gt;SPPNet-å¼•å…¥ç©ºé—´é‡‘å­—å¡”æ± åŒ–æ”¹è¿›RCNN&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;fast-r-cnn&quot;&gt;Fast R-CNN&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/24780395?refer=xiaoleimlnote&quot;&gt;Fast R-CNN&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;faster-r-cnn&quot;&gt;Faster R-CNN&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/24916624?refer=xiaoleimlnote&quot;&gt;Faster R-CNN&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¯¹æ¯”ä¸å°ç»“&quot;&gt;å¯¹æ¯”ä¸å°ç»“&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.zhihu.com/question/35887527/answer/73048322&quot;&gt;çŸ¥ä¹&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;mapmean-average-precision&quot;&gt;mAP(mean average precision)&lt;/h3&gt;
</description>
        <pubDate>Tue, 06 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/03/%E6%96%87%E5%AD%97%E6%A1%86%E9%80%89/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/%E6%96%87%E5%AD%97%E6%A1%86%E9%80%89/</guid>
        
        <category>AI</category>
        
        
      </item>
    
      <item>
        <title>ç½‘ä¸Šæœé›†çš„ä¸€äº›å®‰å…¨å²—é¢è¯•é—®é¢˜--webå¸¸è§æ¼æ´åŸç†ä¸é˜²å¾¡</title>
        <description>&lt;h3 id=&quot;æ€ä¹ˆåˆè¦å¼€å§‹å‡†å¤‡é¢è¯•äº†&quot;&gt;æ€ä¹ˆåˆè¦å¼€å§‹å‡†å¤‡é¢è¯•äº†&lt;/h3&gt;
&lt;p&gt;ä¸Šæ¬¡å‡†å¤‡é¢è¯•è¿˜æ˜¯15å¹´å¤§ä¸‰çš„æ—¶å€™å•Šï¼ŒçœŸå¿ƒæ˜¯ä»€ä¹ˆéƒ½ä¸æ‡‚ï¼ˆè™½ç„¶ç°åœ¨ä¹Ÿæ˜¯â€¦ä¼šç”¨wampå»ºä¸ªç«™å°±æŠ•äº†å®‰å…¨å²—å•Š233â€¦æˆ‘çœŸæ˜¯å“ªé‡Œæ¥çš„å‹‡æ°”â€¦&lt;/p&gt;

&lt;p&gt;ä»Šå¤©çœ‹åˆ°å½“å¹´æŠ•é˜¿é‡Œå†™çš„åœ¨çº¿ç®€å†ï¼ŒçœŸæ˜¯æƒ¨ä¸å¿ç¹ï¼Œä¼°è®¡å½“æ—¶HRçœ‹åˆ°äº†ä»¥ä¸ºæˆ‘æ˜¯åœ¨æç¬‘å§ğŸ¤£&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ€»ç»“çš„å†…å®¹éƒ½æ¯”è¾ƒç®€ç•¥ï¼Œæˆ–è€…ç›´æ¥ç»™å‡ºäº†åˆ«äººæ€»ç»“çš„å¾ˆå¥½çš„æ–‡ç« ä¾›ä»¥åæŸ¥çœ‹ï¼Œå› ä¸ºæ¯ä¸ªç‚¹å±•å¼€æ¥å°†éƒ½å¯ä»¥å†™å¥½å‡ ç¯‡æ–‡ç« ï¼ˆå—¯ï¼Œä¸ºè‡ªå·±å·æ‡’æ‰¾å€Ÿå£&lt;/p&gt;

&lt;p&gt;ç„¶åï¼ŒæŠŠCHYbetaå¤§ç¥çš„&lt;a href=&quot;https://github.com/CHYbeta/Web-Security-Learning&quot;&gt;Web-Security-Learning&lt;/a&gt;è¿‡ä¸€éğŸ˜³ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;å¸¸è§æ¼æ´çš„åŸç†ä¸é˜²å¾¡&quot;&gt;å¸¸è§æ¼æ´çš„åŸç†ä¸é˜²å¾¡&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;XSSï¼š&lt;a href=&quot;https://security.yirendai.com/news/share/26&quot;&gt;æµ…è°ˆXSSâ€”å­—ç¬¦ç¼–ç å’Œæµè§ˆå™¨è§£æåŸç†&lt;/a&gt;&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ç±»å‹ï¼š

    åå°„å‹XSSï¼šæŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ®â€œåå°„â€ç»™æµè§ˆå™¨ï¼Œéœ€è¦ç”¨æˆ·ç‚¹å‡»æŸé“¾æ¥

    å­˜å‚¨å‹XSSï¼šæŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨

    DOM Based XSSï¼šä¹Ÿå±äºåå°„å‹XSSï¼Œä¿®æ”¹é¡µé¢çš„DOMèŠ‚ç‚¹å½¢æˆXSS

å¸¸ç”¨payloadï¼š

    https://www.t00ls.net/thread-42640-1-1.html

é˜²å¾¡ï¼š

    Cookieçš„`HttpOnlyæ ‡è¯†`

    XSS Filterï¼šè¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„å±é™©å­—ç¬¦

    è¾“å‡ºæ£€æŸ¥ï¼šç¼–ç å’Œè½¬ä¹‰
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;SQL Injection:&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;åŸç†ï¼š

    ç”¨æˆ·è¾“å…¥çš„æ•°æ®å½“åšä»£ç æ‰§è¡Œ

é˜²å¾¡ï¼š
        
    ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ï¼Œç»‘å®šå˜é‡

    æ£€æŸ¥æ•°æ®ç±»å‹

    ä½¿ç”¨å®‰å…¨å‡½æ•°

    æœ€å°æƒé™åŸåˆ™
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;CSRF:&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;åŸç†ï¼š

    ç”¨æˆ·ç™»å½•æŸè´¦æˆ·ï¼Œæµè§ˆå™¨è·å¾—cookie

    æ”»å‡»è€…è¯±ä½¿ç”¨æˆ·è®¿é—®æŸæ„é€ å¥½çš„æ¶æ„CSRFé¡µé¢

é˜²å¾¡ï¼š
        
    éªŒè¯ç 

    Referer Checkï¼ˆHTTPSè·³è½¬åˆ°HTTPä¸ä¼šå‘é€Refererï¼‰

    Anti CSRF Token
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;SSRFï¼ˆServer-Side Request Forgeryï¼‰:æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼ˆè¿™ä¸ªæ¼æ´æˆ‘è¿˜çœŸçš„æ²¡æœ‰æµ‹è¯•è¿‡â€¦&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;å‚è€ƒï¼šhttp://uknowsec.cn/posts/notes/SSRF%E6%BC%8F%E6%B4%9E%E7%9A%84%E5%88%A9%E7%94%A8%E4%B8%8E%E5%AD%A6%E4%B9%A0.html

åŸç†ï¼š
    
    ç”±æ”»å‡»è€…æ„é€ çš„æ”»å‡»é“¾æ¥ä¼ ç»™æœåŠ¡ç«¯æ‰§è¡Œé€ æˆçš„æ¼æ´ï¼Œä¸€èˆ¬ç”¨æ¥åœ¨å¤–ç½‘æ¢æµ‹æˆ–æ”»å‡»å†…ç½‘æœåŠ¡

å¯åˆ©ç”¨çš„ä¼ªåè®®ï¼š

    å¯¹curlå‡½æ•°çš„æ»¥ç”¨ï¼Œdict file ftp ftps gopher http https imap imaps pop3 pop3s rtsp smb smbs smtp smtps telnet tftp 

é˜²å¾¡ï¼š

    è¿‡æ»¤è¿”å›ä¿¡æ¯

    é™åˆ¶è¯·æ±‚ç«¯å£

    å†…ç½‘IPé»‘åå•
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;XXE&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;å‚è€ƒï¼šhttps://thief.one/2017/06/20/1/
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

</description>
        <pubDate>Tue, 06 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/03/web%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%98%B2%E5%BE%A1/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/web%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E4%B8%8E%E9%98%B2%E5%BE%A1/</guid>
        
        <category>Sec</category>
        
        
      </item>
    
      <item>
        <title>LSTMç›¸å…³çš„ä¸€äº›é—®é¢˜</title>
        <description>&lt;h3 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h3&gt;

&lt;p&gt;æœ€è¿‘åœ¨çœ‹æ·±åº¦å­¦ä¹ ç›¸å…³çš„ä¸œè¥¿ï¼Œå°±æŠŠä¸€äº›è‡ªå·±æƒ³äº†å¾ˆä¹…ï¼Œç½‘ä¸Šçš„ç­”æ¡ˆä¹Ÿä¸æ˜¯å¾ˆè¯¦ç»†çš„ä¸œè¥¿è®°å½•ä¸‹æ¥ï¼Œå¯èƒ½ä¼šæœ‰éƒ¨åˆ†é”™è¯¯ï¼Œä¼šä¸æ–­æ”¹è¿›å“’ã€‚&lt;/p&gt;

&lt;h3 id=&quot;rnn-ä¸-lstm-ç›¸å…³åŸºç¡€&quot;&gt;RNN ä¸ LSTM ç›¸å…³åŸºç¡€&lt;/h3&gt;

&lt;p&gt;ç½‘ä¸Šçœ‹åˆ°çš„RNNçš„ç½‘ç»œå›¾å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/LSTM//RNN-shorttermdepdencies.png&quot; height=&quot;280&quot; width=&quot;600&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯ä¹Ÿå¯ä»¥å°†RNNçš„ç½‘ç»œå›¾ç”»æˆå¦‚ä¸‹çš„æ¨¡å¼ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/LSTM//LSTM3-SimpleRNN.png&quot; height=&quot;280&quot; width=&quot;600&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿï¼å¯¹ï¼ŒLSTMåªæ˜¯åœ¨RNNçš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼Œæ·»åŠ äº†å¾ˆå¤šgateæ¥æ§åˆ¶ä¹‹å‰çš„è®°å¿†ï¼Œä»¥è§£å†³RNNå¯èƒ½å¼•èµ·çš„æ¢¯åº¦å¼¥æ•£ä¸æ¢¯åº¦çˆ†ç‚¸(è¿™é‡Œå¯ä»¥å‚è€ƒ&lt;a href=&quot;https://zhuanlan.zhihu.com/p/25518711&quot;&gt;YJangoçš„å¾ªç¯ç¥ç»ç½‘ç»œâ€”â€”å®ç°LSTM&lt;/a&gt;)çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;ä¼ ç»Ÿçš„LSTMçš„ç½‘ç»œå›¾çœ‹ä¸Šå»ç‰¹åˆ«å¤æ‚:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/LSTM//LSTM3-chain.png&quot; height=&quot;280&quot; width=&quot;600&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯åªè¦æ¸…æ¥šä¸€ç‚¹ï¼Œå°±æ˜¯é‡Œé¢é‚£ä¹ˆå¤šçš„gateåªæ˜¯ä¸ºäº†æ§åˆ¶æ¯æ¬¡è¾“å…¥å¤šå°‘ã€é—å¿˜å¤šå°‘ã€è¾“å‡ºå¤šå°‘ä¿¡æ¯ã€‚é€šè¿‡å­¦ä¹ å’Œè®­ç»ƒï¼Œæ¥è°ƒèŠ‚è¿™ä¸ªgateçš„å€¼ï¼Œä»¥è¾¾åˆ°æœ€å¥½çš„æ•ˆæœã€‚ç±»ä¼¼äºä¸€ä¸ªé˜€é—¨æ§åˆ¶æ°´æµçš„å¤šå°‘ï¼Œå…·ä½“é˜€é—¨çš„æ¾ç´§å³gateçš„å€¼ï¼Œéœ€è¦é€šè¿‡åå¤å­¦ä¹ è®­ç»ƒæ¥å¾—åˆ°ã€‚å…·ä½“å¯ä»¥å‚è€ƒï¼š&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://colah.github.io/posts/2015-08-Understanding-LSTMs/&quot;&gt;Understanding LSTM Networks&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/25518711&quot;&gt;YJangoçš„å¾ªç¯ç¥ç»ç½‘ç»œâ€”â€”å®ç°LSTM&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å› æ­¤ï¼Œå¾ˆå¤šLSTMæƒ³ä¸æ¸…æ¥šçš„é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥ç”¨RNNæ¥ç±»æ¯”å•¦ğŸ¤—~&lt;/p&gt;

&lt;h3 id=&quot;lstmçš„è¾“å…¥ä¸è¾“å‡º&quot;&gt;LSTMçš„è¾“å…¥ä¸è¾“å‡º&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆè¿˜æ˜¯çœ‹ä¸‹RNNçš„è¾“å…¥ä¸è¾“å‡ºå§(æ‘˜è‡ª&lt;a href=&quot;http://karpathy.github.io/2015/05/21/rnn-effectiveness/&quot;&gt;The Unreasonable Effectiveness of Recurrent Neural Networks&lt;/a&gt;)ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/LSTM/charseq.jpeg&quot; height=&quot;400&quot; width=&quot;500&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;An example RNN with 4-dimensional input and output layers, and a hidden layer of 3 units (neurons). 
This diagram shows the activations in the forward pass when the RNN is fed the characters &quot;hell&quot; as input. 
The output layer contains confidences the RNN assigns for the next character (vocabulary is &quot;h,e,l,o&quot;); 
We want the green numbers to be high and red numbers to be low.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å°†â€helloâ€è¿™ä¸ªå•è¯çš„æ¯æ¬¡å­—æ¯è¿›è¡ŒOne-Hotç¼–ç ï¼Œæ¯è¾“å…¥ä¸€ä¸ªå­—æ¯é¢„æµ‹ä¸‹ä¸€ä¸ªè¾“å‡ºçš„å­—æ¯æ˜¯ä»€ä¹ˆã€‚ä¾‹å¦‚ï¼Œè¾“å…¥hå¯¹åº”è¾“å‡ºeï¼Œè¾“å…¥eå¯¹åº”è¾“å‡ºlï¼Œè€Œè¾“å…¥låˆ™å¯èƒ½å¯¹åº”læˆ–è€…oã€‚æ­¤å¤„å¯¹åº”4ç»´çš„è¾“å…¥ä¸è¾“å‡ºå±‚ï¼Œä¸€ä¸ªæœ‰ç€ä¸‰ä¸ªç¥ç»å…ƒçš„éšè—å±‚ã€‚&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;batch_size&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;input_size&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;time_steps&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;num_units&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;layer_num&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;class_num&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;4&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;4&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;4&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;å†çœ‹ä¸‹è¿™ä¸ªçŸ¥ä¹å›ç­”ä¸Šçš„è¿™ä¸ªå›¾,å¯èƒ½ä¼šæ›´åŠ æ¸…æ™°ä¸€äº›:
&lt;img src=&quot;/images/posts/2018/03/LSTM/çŸ¥ä¹RNNå›¾.jpg&quot; height=&quot;400&quot; width=&quot;600&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.zhihu.com/question/41949741/answer/318771336&quot;&gt;ä½œè€…ï¼šScofield&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼ŒLSTMçš„è¾“å…¥ä¸è¾“å‡ºæ˜¯æ€æ ·çš„å‘¢ï¼Ÿå¯ä»¥å®Œå…¨ç±»æ¯”RNNçš„è¾“å…¥ä¸è¾“å‡ºã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/LSTM/myLSTM.jpg&quot; height=&quot;600&quot; width=&quot;850&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™å¼ å›¾æˆ‘æ‰‹å·¥ç”»çš„ï¼Œå¯èƒ½æœ‰ä¸å¯¹çš„åœ°æ–¹ï¼Œä¸»è¦å‚è€ƒäº†&lt;a href=&quot;https://jasdeep06.github.io/posts/Understanding-LSTM-in-Tensorflow-MNIST/&quot;&gt;Understanding LSTM in Tensorflow(MNIST dataset)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å›°æƒ‘äº†æˆ‘æœ€ä¹…çš„æ˜¯num_unitsåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œç„¶å&lt;a href=&quot;https://www.zhihu.com/question/41949741/answer/309529532&quot;&gt;çŸ¥ä¹&lt;/a&gt;è¿™ä¸ªå›ç­”å¥½è¯¦ç»†ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/LSTM/singleLSTMcell.png&quot; height=&quot;300&quot; width=&quot;500&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å›¾ä¸­å››ä¸ªé»„è‰²çš„æ¡†æ¡†å°±æ˜¯ä¼ ç»Ÿçš„å‰é¦ˆç¥ç»ç½‘ç»œï¼Œè€Œnum_unitså°±æ˜¯è¿™ä¸ªå‰é¦ˆç¥ç»ç½‘ç»œé‡Œé¢çš„éšè—èŠ‚ç‚¹å•Šå•Šå•Šå•Šã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…³äºå¼ é‡tensorçš„ä¸€äº›ç–‘æƒ‘&quot;&gt;å…³äºå¼ é‡(tensor)çš„ä¸€äº›ç–‘æƒ‘&lt;/h3&gt;

&lt;p&gt;ç¥ç»ç½‘ç»œçš„å¤„ç†å•ä½å‡ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;å‘é‡&lt;/code&gt;ï¼Œæ‰€ä»¥&lt;code class=&quot;highlighter-rouge&quot;&gt;å¼ é‡&lt;/code&gt;æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;

&lt;p&gt;ä¸»è¦å‚è€ƒè¿™ç¯‡æ–‡ç« &lt;a href=&quot;https://zhuanlan.zhihu.com/p/25268020&quot;&gt;æ•°å­¦ä¸è¡Œè¿˜å­¦AI-ç¬¬4è¯-å›¾è§£å¼ é‡&lt;/a&gt;,å†™çš„é€šä¿—æ˜“æ‡‚ï¼Œæˆ‘å°±ä¸æ‘˜æŠ„å•¦å™œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2018/03/LSTM/tensor.jpg&quot; height=&quot;500&quot; width=&quot;700&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¸¸è§çš„å¼ é‡æœ‰ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;3D = æ—¶é—´åºåˆ—   (time, frequency, channel)

4D = å›¾åƒ      (sample_size, width, height, color_depth)

5D = è§†é¢‘      (sample_size, frames, width, height, color_depth))
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ€»è€Œè¨€ä¹‹ï¼Œå¼ é‡æƒ³è¦å¤šå°‘ç»´å°±å¤šå°‘ç»´ï¼Œå°±çœ‹ä½ çš„éœ€æ±‚ä¸è®¾è®¡å•¦ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æš‚æ—¶å°±å†™è¿™ä¹ˆå¤šå§æƒ³åˆ°äº†å†è¡¥å……&quot;&gt;æš‚æ—¶å°±å†™è¿™ä¹ˆå¤šå§ï¼Œæƒ³åˆ°äº†å†è¡¥å……&lt;/h3&gt;

</description>
        <pubDate>Thu, 01 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/03/LSTM%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/LSTM%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</guid>
        
        <category>AI</category>
        
        
      </item>
    
      <item>
        <title>æ‚ä¸ƒæ‚å…«çš„å®‰å…¨tips</title>
        <description>&lt;h3 id=&quot;xss-tips&quot;&gt;XSS TIPS&lt;/h3&gt;

&lt;p&gt;Ref:&lt;a href=&quot;https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Open%20redirect&quot;&gt;PayloadsAllTheThings&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;CRLF&lt;/code&gt;:    (&lt;code class=&quot;highlighter-rouge&quot;&gt;CR&lt;/code&gt;:&lt;code class=&quot;highlighter-rouge&quot;&gt;\r&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;0x0d&lt;/code&gt;;&lt;code class=&quot;highlighter-rouge&quot;&gt;LF&lt;/code&gt;:&lt;code class=&quot;highlighter-rouge&quot;&gt;\n&lt;/code&gt;,&lt;code class=&quot;highlighter-rouge&quot;&gt;0x0a&lt;/code&gt;)
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;java%0d%0ascript%0d%0a:alert(0)
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;XSS from Open URL - If itâ€™s in a JS variable
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;;alert(0);//
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;XSS from data:// wrapper
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://www.example.com/redirect.php?url=data:text/html;base64,PHNjcmlwdD5hbGVydCgiWFNTIik7PC9zY3JpcHQ+Cg==
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;XSS from javascript:// wrapper
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;http://www.example.com/redirect.php?url=javascript:prompt(1)
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Tue, 02 Jan 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/01/secTips/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/01/secTips/</guid>
        
        <category>Sec</category>
        
        
      </item>
    
      <item>
        <title>è¿™äººç”Ÿé¦–ä¸‰ä¸ªå¼±å¼±çš„CVE</title>
        <description>&lt;h3 id=&quot;cve-2017-17971&quot;&gt;&lt;a href=&quot;https://www.cvedetails.com/cve/CVE-2017-17971/&quot;&gt;CVE-2017-17971&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;ä¸€ç›´è§‰å¾—æ˜¯å¤§å‚çš„é€šç”¨å‹æ¼æ´ï¼Œéå¸¸é«˜å¤§ä¸Šçš„é‚£ç§ã€‚&lt;/p&gt;

&lt;p&gt;å¹´æœ«çš„å‰ä¸¤å¤©ï¼Œç‹—ç§‘åœ¨æ¨ç‰¹ä¸Šå‘ç°äº†ä¸€ä¸ªåšå®‰å…¨çš„å°ä¼™å­ï¼Œå‘äº†è‡ªå·±çš„ç¬¬ä¸€ä¸ªCVEæˆªå›¾ã€‚&lt;/p&gt;

&lt;p&gt;çœ‹äº†ä¸‹æ¼æ´è¯¦æƒ…ï¼Œå‘ç°å°±æ˜¯ä¸ªåœ¨å¿˜è®°å¯†ç å¤„çš„å¾ˆç®€å•çš„XSSï¼Œå‡ ä¹ä¸ç”¨ç»•è¿‡ã€‚&lt;/p&gt;

&lt;p&gt;äºæ˜¯æˆ‘ä¹Ÿå°è¯•åœ¨&lt;a href=&quot;https://www.cvedetails.com/&quot;&gt;CVE details&lt;/a&gt;ç½‘ç«™ä¸Šæ‰¾ä¸€äº›å·²ç»æœ‰CVEç¼–å·çš„CRMã€‚&lt;/p&gt;

&lt;p&gt;Dolibarr CRM ,å‡ºäºå°è¯•çš„å¿ƒæ€åœ¨å¿˜è®°å¯†ç å¤„è¯•äº†xssè¯­å¥ï¼ŒæŠ¥é”™æç¤ºæ˜¯å‡ºç°äº†æ³¨å…¥çš„è¯­å¥ï¼Œå¹¶ä¸”æœ‰å¯¹åº”çš„æ–‡ä»¶åã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹è½½äº†æºç ï¼Œå‘ç°åªå¯¹éƒ¨åˆ†xssè¯­å¥è¿›è¡Œçš„è¿‡æ»¤ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;onclick&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;onscroll&lt;/code&gt;å¹¶ä¸åœ¨é»‘åå•é‡Œï¼Œç„¶åå°±æ˜¯å­˜å‚¨å‹XSSã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€æ¬¡æäº¤CVEï¼ŒDiscoveræˆ‘ä»¥ä¸ºæ˜¯å¡«å†™ä¸ªäººæˆ–è€…ç»„ç»‡(æˆ‘æƒ³æˆäº†äºŒåˆ†ç±»é—®é¢˜ï¼Œä¸€å®šæ˜¯æœ€è¿‘æœºå™¨å­¦ä¹ çœ‹å¤šäº†â€¦)ç›´æ¥å¡«ä¸Šäº†individualâ€¦Referenceæˆ‘ä»¥ä¸ºæ˜¯å‚è€ƒæ–‡çŒ®â€¦åæ¥åœ¨githubæäº¤äº†issueï¼Œæè¿°äº†æ¼æ´è¯¦æƒ…ã€‚&lt;/p&gt;

&lt;h3 id=&quot;cve-2017-18004&quot;&gt;&lt;a href=&quot;https://www.cvedetails.com/cve/CVE-2017-18004/&quot;&gt;CVE-2017-18004&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;zurmoè¿™ä¸ªä¹‹å‰æœ‰è¿‡æŒºå¤šä¸ªxssçš„cveï¼Œæ„Ÿè§‰å·²ç»æŠŠè¿‡æ»¤åšçš„å¾ˆå¥½äº†ï¼Œä¹Ÿæ²¡æŠ¥å¤ªå¤§å¸Œæœ›ã€‚&lt;/p&gt;

&lt;p&gt;åƒåˆé¥­å‰å¼€äº†burpæ‰«æï¼Œç¡å®Œåˆè§‰å›æ¥å‘ç°æ‰«å‡ºæ¥xssäº†ï¼Œä½†æ˜¯åªæ˜¯å›æ˜¾åœ¨jsä»£ç é‡Œé¢ï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;åæ¥ç‹—ç§‘å¸®æˆ‘é—­åˆäº†ä¸‹ï¼ŒæˆåŠŸå¼¹æ¡†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;cve-2018-3814&quot;&gt;&lt;a href=&quot;https://www.cvedetails.com/cve/CVE-2018-3814/&quot;&gt;CVE-2018-3814&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;CraftCMSçº¯ç²¹æ˜¯æˆ‘æƒ³çœ‹çœ‹æœ‰å•¥å°ä¼—çš„CMSæ¼æ´æœ‰CVEï¼Œå‘ç°å¯ä»¥è¯•ç”¨Demoï¼Œå°±ç”³è¯·äº†çœ‹çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ç€æœ‰ä¸Šä¼ å°±å¿…æœ‰æ¼æ´çš„ç²¾ç¥ï¼Œè¯•äº†ä¸‹æ”¹æ–‡ä»¶ååç¼€ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€å¼€å§‹ä¸è¡Œï¼Œåæ¥æ— æ„ä¸­å‘ç°å¦‚æœä¸Šä¼ ä¸¤å¼ åŒæ ·çš„å›¾ç‰‡çš„è¯ï¼Œç¬¬äºŒå¼ åŒåçš„å›¾ç‰‡å¯ä»¥æ”¹æˆâ€.phpâ€åç¼€ã€‚&lt;/p&gt;

&lt;p&gt;æ‰“å¼€phpæ–‡ä»¶ï¼Œå‘ç°å¯ä»¥è§£æï¼Œä½†æ˜¯é‡Œé¢çš„shellè¯­å¥è¢«GDåº“è¿‡æ»¤æ²¡äº†ã€‚&lt;/p&gt;

&lt;p&gt;æƒ³æ¥ç ”ä¸€çš„æ—¶å€™åšè¿‡ä¸€ä¸ªCMSeasy getshellçš„æ¼æ´å¤ç°ï¼Œé‡Œé¢å°±æœ‰ç»•è¿‡GDåº“çš„è¯´æ˜ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿæ€ªè‡ªå·±å½“åˆæ²¡æœ‰æå¾—ç‰¹åˆ«æ¸…æ¥šï¼Œæµªè´¹äº†ä¸€ç‚¹æ—¶é—´ã€‚å†å»ä»”ç»†çœ‹åˆ«äººçš„è¯´æ˜ï¼Œå‘ç°å¾—å¤šè¯•å‡ å¼ å›¾ç‰‡æ‰è¡Œã€‚&lt;/p&gt;

&lt;p&gt;æˆåŠŸå‡ºç°&lt;code class=&quot;highlighter-rouge&quot;&gt;phpinfo&lt;/code&gt;çš„å›¾ç‰‡çš„æ—¶å€™ï¼Œæˆ‘çš„æ‰‹éƒ½æ˜¯æŠ–çš„ğŸ¤£ï¼Œç®—æ˜¯ç¬¬ä¸€æ¬¡è‡ªå·±æŒ–å‡ºæ¥ä¸€ä¸ªä¸­å±æ¼æ´å§&lt;/p&gt;
</description>
        <pubDate>Tue, 02 Jan 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/01/myfirstCVE/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/01/myfirstCVE/</guid>
        
        <category>Sec</category>
        
        
      </item>
    
      <item>
        <title>2018å¼€å¹´çš„ç¢ç¢å¿µ</title>
        <description>&lt;h3 id=&quot;å…³äºæ­¤åšå®¢çš„é—²ç½®ä¸å¯ç”¨&quot;&gt;å…³äºæ­¤åšå®¢çš„é—²ç½®ä¸å¯ç”¨&lt;/h3&gt;
&lt;p&gt;é—®æˆ‘é—²ç½®è¿™ä¹ˆä¹…çš„åŸå›  ? è¿˜ä¸æ˜¯å› ä¸ºæˆ‘æ‡’ğŸ¤£â€¦å¹¶ä¸”è§‰å¾—markdownçš„å›¾ç‰‡å¤§å°å¾ˆéš¾æ§åˆ¶ã€‚&lt;/p&gt;

&lt;p&gt;å†æ¬¡å¯ç”¨æ˜¯å› ä¸ºä»Šå¤©æ¸…ç†Gmailé‚®ç®±çš„æ—¶å€™ï¼Œçœ‹åˆ°æœ‰ä¸ªå¦¹å­åœ¨17å¹´7æœˆä»½çš„æ—¶å€™ï¼Œç»™æˆ‘å‘é‚®ä»¶è¯·æ•™åšå®¢æ­å»ºç›¸å…³çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;å˜¤å˜¤å˜¤ï¼Œæˆ‘çš„Gmailå¡æ»¡äº†twitterçš„åƒåœ¾é‚®ä»¶ï¼Œå¹¶ä¸”è§‰å¾—æ²¡äººè”ç³»æˆ‘ï¼Œä¹Ÿæ‡’å¾—checkï¼Œå¥½æ„§ç–šã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–å…ƒæ—¦å‡æœŸçš„æ—¶å€™æŒ–åˆ°äº†ä¸‰ä¸ªCVEï¼Œä¸¤ä¸ªXSSï¼Œä¸€ä¸ªå›¾ç‰‡ä¸Šä¼ ã€‚å‡†å¤‡æŠŠä¸€äº›æŒ–æ´è¯¦æƒ…å†™åœ¨è¿™é‡Œå§ï¼Œæ€»è§‰å¾—åœ¨CSDNè¿˜æœ‰åšå®¢å›­å†™è¿™äº›ä¸å¤ªå¥½ã€‚&lt;/p&gt;

&lt;h3 id=&quot;2018å¹´çš„ä¸€äº›å±•æœ›&quot;&gt;2018å¹´çš„ä¸€äº›å±•æœ›&lt;/h3&gt;
&lt;p&gt;åœ¨æ·±åœ³æŠŠæ¯•è®¾åšå®Œï¼Œäº”æœˆä»½å¯ä»¥å®‰å¿ƒå›åŒ—äº¬æ‰¾å®ä¹ ï¼Œæƒ³å»3BATğŸ˜Š&lt;/p&gt;

&lt;p&gt;å¸Œæœ›ä»¥åå¯ä»¥ä»äº‹&lt;code class=&quot;highlighter-rouge&quot;&gt;å®‰å…¨+AI&lt;/code&gt;ç›¸å…³çš„å·¥ä½œå§ï¼Œæ¯•ç«Ÿè‡ªå·±å…¥é—¨äº†è¿™ä¹ˆä¹…å®‰å…¨ï¼Œç ”ä¸€ä¹Ÿé€‰äº†æœºå™¨å­¦ä¹ ç›¸å…³è¯¾ç¨‹ï¼Œç°åœ¨çš„æ¯•è®¾æœºç¼˜å·§åˆä¸‹åšäº†æ·±åº¦å­¦ä¹ ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶é‡ä¸­ä¹‹é‡å°±æ˜¯è¦å¤šæŒ–æ¼æ´ï¼Œæ„Ÿè§‰å¤šçœ‹æ¼æ´è¯¦æƒ…å¤šå»å¤ç°æ¼æ´è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰å°±æ˜¯è·‘æ­¥å¥èº«ï¼Œå»å¹´çš„ä½“æ£€æŸ¥å‡ºæ¥ä¸å°‘ä¸æ˜¯å¾ˆç´§è¦çš„å°ç—…ï¼Œè¿˜æ˜¯å¾—é‡è§†èµ·æ¥å§ï¼Œæ—©ç¡æ—©èµ·ğŸ˜‹~&lt;/p&gt;

&lt;h3 id=&quot;çŸ¥é“å›¾ç‰‡æ€ä¹ˆè°ƒæ•´å¤§å°å•¦æ›´æ–°äº20180303-&quot;&gt;çŸ¥é“å›¾ç‰‡æ€ä¹ˆè°ƒæ•´å¤§å°å•¦ï¼ï¼ˆæ›´æ–°äº2018.03.03 ï¼‰&lt;/h3&gt;

&lt;p&gt;æˆ‘ä¹‹å‰éƒ½æ˜¯è¿™ä¹ˆæ’å…¥å›¾ç‰‡çš„ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;![](/images/readme//index.png) &lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/readme//index.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åé…±ç´«æ’å…¥å›¾ç‰‡å°±å¯ä»¥æ§åˆ¶é•¿å®½å•¦ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;img src=&quot;/images/readme//index.png&quot; height=&quot;400&quot; width=&quot;700&quot;&amp;gt; &lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/readme//index.png&quot; height=&quot;400&quot; width=&quot;700&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Tue, 02 Jan 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/01/2018Boom/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/01/2018Boom/</guid>
        
        <category>ç¢ç¢å¿µ</category>
        
        
      </item>
    
      <item>
        <title>unsigned int ä¸ signed int</title>
        <description>&lt;h3 id=&quot;unsigned-int&quot;&gt;unsigned int&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;unsigned int&lt;/code&gt; : æ— ç¬¦å·æ•°ï¼Œ0~2^n - 1ã€‚é‡åˆ°è´Ÿæ•°ï¼Œåˆ™ä»¥&lt;strong&gt;è¡¥ç &lt;/strong&gt;å½¢å¼å­˜å‚¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;(signed) int&lt;/code&gt; : æœ‰ç¬¦å·æ•°ï¼Œ-2^(n-1)~2^(n-1) - 1&lt;/p&gt;

&lt;h3 id=&quot;ç®€å•çš„å¾ªç¯é—®é¢˜&quot;&gt;ç®€å•çš„å¾ªç¯é—®é¢˜&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;signed&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;//æœ‰ç¬¦å·æ•°
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ­¤å¤„çš„i&amp;lt;0.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;//æ— ç¬¦å·æ•°ï¼Œæ­¤å¤„å°†iåˆå§‹åŒ–ä¸ºè´Ÿæ•°ï¼Œä»¥è¡¥ç å½¢å¼å­˜å‚¨ï¼Œåœ¨è®¡ç®—æœºä¸­æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ­¤å¤„çš„i&amp;gt;0.&lt;/p&gt;

&lt;h3 id=&quot;æº¢å‡ºé—®é¢˜&quot;&gt;æº¢å‡ºé—®é¢˜&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/* Kernel memory region holding user-accessible data */&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define KSIZE 1024
&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KSIZE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/* Copy at most maxlen bytes from kernel region to user buffer */&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;copy_from_kernel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_dest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/* Byte count len is minimum of buffer size and maxlen */&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;KSIZE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxlen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;KSIZE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;maxlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;memcpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_dest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kbuf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ­¤å¤„çš„&lt;strong&gt;len&lt;/strong&gt;é€‰æ‹© &lt;code class=&quot;highlighter-rouge&quot;&gt;KSIZE&lt;/code&gt;ä¸&lt;code class=&quot;highlighter-rouge&quot;&gt;maxlen&lt;/code&gt;ä¸­é•¿åº¦è¾ƒçŸ­çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯å¦‚æœæ­¤æ—¶&lt;code class=&quot;highlighter-rouge&quot;&gt;maxlen&lt;/code&gt;ä¸º&lt;strong&gt;è´Ÿæ•°&lt;/strong&gt;ï¼Œä»¥è¡¥ç å½¢å¼å­˜å‚¨ï¼Œå³ä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ•°ã€‚&lt;/p&gt;

&lt;p&gt;å†ç»“åˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;memcpy&lt;/code&gt;ä¼šé€ æˆç¼“å†²åŒºæº¢å‡ºã€‚&lt;/p&gt;
</description>
        <pubDate>Thu, 28 Sep 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/09/unsigned/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/09/unsigned/</guid>
        
        <category>Sec</category>
        
        
      </item>
    
      <item>
        <title>MFCæŸ¥è¯¢æ³¨å†Œè¡¨æ•°æ®</title>
        <description>&lt;h3 id=&quot;ç›¸å…³æ³¨å†Œè¡¨æ•°æ®&quot;&gt;ç›¸å…³æ³¨å†Œè¡¨æ•°æ®&lt;/h3&gt;

&lt;p&gt;æƒ³è¦é€šè¿‡æŸ¥è¯¢æ³¨å†Œè¡¨ï¼Œæ”¶é›†ä¸€äº›ç³»ç»Ÿä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;1.ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯:	HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ProductName:Windows 10 Enterprise 2015 LTSB

RegisteredOwner:Snowty

SystemRoot:C:\WINDOWS
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2017/09/MFCRegData//1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;2.æ˜¯å¦ä¸ºè™šæ‹Ÿæœºï¼š	HKEY_LOCAL_MACHINE/HARDWARE/DESCRIPTION/System/BIOS/&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SystemProductName:VMware Virtual Platform
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2017/09/MFCRegData//2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;3.ç”µè„‘ä½æ•°ï¼š	HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment\&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PROCESSOR_ARCHITECTURE:
	
    x86ã€€ã€€â†’32ä½æ“ä½œç³»ç»Ÿ
	
    AMD64 â†’64ä½æ“ä½œç³»ç»Ÿ
	
    IA64ã€€â†’64ä½æ“ä½œç³»ç»Ÿï¼ˆfor Itanium-basedï¼‰
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2017/09/MFCRegData//3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;4.officeç‰ˆæœ¬ï¼š	HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;office2003:11.0
office2007:12.0
office2010:14.0
office2013:15.0
office2016:16.0
office2017:17.0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;5.å›½å®¶/æ—¶åŒºï¼š	HKEY_CURRENT_USER\Control Panel\International\&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sCountry:ä¸­åäººæ°‘å…±å’Œå›½

LocalName:zh-CN

sLanguage:CHS
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2017/09/MFCRegData//4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;mfcæŸ¥è¯¢æ³¨å†Œè¡¨ä¿¡æ¯&quot;&gt;MFCæŸ¥è¯¢æ³¨å†Œè¡¨ä¿¡æ¯&lt;/h3&gt;

&lt;p&gt;ä»£ç ä¸»è¦å‚è€ƒã€Šç²¾é€šMFCç¨‹åºè®¾è®¡ã€‹ï¼Œäººæ°‘é‚®ç”µï¼Œå§šé¢†ç”°ï¼Œç¬¬24ç« ï¼Œæ³¨å†Œè¡¨ç¼–ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;æ•´ä½“æ¥è¯´ä»£ç å¾ˆç®€å•ï¼Œé€šä¿—æ˜“æ‡‚ã€‚ä½†æ˜¯å…¶é—´å‡ºç°äº†å®½å­—èŠ‚&lt;code class=&quot;highlighter-rouge&quot;&gt;\0&lt;/code&gt;æˆªæ–­çš„é—®é¢˜ï¼ŒçœŸå¿ƒæ˜¯æŠ˜è…¾äº†å¥½ä¹…ğŸ™„&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;RegGetValue&lt;/code&gt;è¿›è¡ŒæŸ¥è¯¢ï¼Œè¯¦ç»†ç”¨æ³•å¯ä»¥æŸ¥çœ‹&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/windows/desktop/ms724868(v=vs.85).aspx&quot;&gt;MSDN&lt;/a&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span class=&quot;n&quot;&gt;LONG&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WINAPI&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RegGetValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_In_&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;HKEY&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;hkey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_In_opt_&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;LPCTSTR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lpSubKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_In_opt_&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;LPCTSTR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lpValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_In_opt_&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;DWORD&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;dwFlags&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_Out_opt_&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;LPDWORD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pdwType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_Out_opt_&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;PVOID&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;pvData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_Inout_opt_&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LPDWORD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pcbData&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥æŸ¥è¯¢ProductNameä¸ºä¾‹ï¼Œå…¨éƒ¨å·¥ç¨‹ä»£ç è§&lt;a href=&quot;https://github.com/Snowty/MFC_RegData&quot;&gt;Git&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CRegDataDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnClickedQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// TODO: Add your control notification handler code here
&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;//--------------------------------æŸ¥è¯¢ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯--------------------------
&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;//æŸ¥è¯¢ProductName
&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;DWORD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cdData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;//é¢„è®¾ç½®çš„æ•°æ®é•¿åº¦
&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;LPDWORD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cdData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;LPBYTE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ProductName_Get&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BYTE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;//ä¿å­˜æŸ¥è¯¢çš„æ•°æ®
&lt;/span&gt;	&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RegGetValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HKEY_LOCAL_MACHINE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Software&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Microsoft&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Windows NT&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;CurrentVersion&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ProductName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RRF_RT_REG_SZ&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ProductName_Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//æ³¨å†Œè¡¨æŸ¥è¯¢ï¼Œå°†ç»“æœä¿å­˜åœ¨ProductName_Getä¸­
&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;//å°†unicodeè½¬æ¢ä¸ºASCII
&lt;/span&gt;	&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ProductName_Get_Buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;DWORD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dBufSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;WideCharToMultiByte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CP_UTF8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LPCWCH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProductName_Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ProductName_Get_Buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dBufSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//è½¬æ¢åçš„ç»“æœä¿å­˜åœ¨ProductName_Get_Bufä¸­
&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;m_ProductName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProductName_Get_Buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Š
&lt;/span&gt;    
        &lt;span class=&quot;n&quot;&gt;UpdateData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;//å°†å€¼èµ‹ç»™æ§ä»¶
&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ProductName_Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¦‚æœä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;RegQueryValueEx&lt;/code&gt;è¿›è¡ŒæŸ¥è¯¢ï¼Œåˆ™éœ€è¦å…ˆä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;RegOpenKeyEx&lt;/code&gt;æ‰“å¼€æ³¨å†Œè¡¨ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CRegDataDlg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OnClickedQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;HKEY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hKEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;//handler
&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;LPCTSTR&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;banner_Set&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Software&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Microsoft&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Windows NT&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;CurrentVersion&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//å­å¥ç›®å½•
&lt;/span&gt;	&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;retopen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegOpenKeyEx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HKEY_LOCAL_MACHINE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;banner_Set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KEY_READ&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hKEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;	&lt;span class=&quot;c1&quot;&gt;//æ‰“å¼€ç³»ç»Ÿç‰ˆæœ¬æ³¨å†Œè¡¨
&lt;/span&gt;	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retopen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ERROR_SUCCESS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;MessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ERROR:Can not open the hKEY!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;//æŸ¥è¯¢RegisteredOwner
&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;LPBYTE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RegisteredOwner_Get&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BYTE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;DWORD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type_2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;REG_SZ&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;DWORD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cdData_2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ret2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegQueryValueEx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hKEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;RegisteredOwner&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type_2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegisteredOwner_Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cdData_2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ret2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ERROR_SUCCESS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;MessageBox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Can not query the Reg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dBuf2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;DWORD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dBufSize2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;WideCharToMultiByte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CP_UTF8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LPCWCH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegisteredOwner_Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dBuf2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dBufSize2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;m_RegisteredOwner&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dBuf2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RegisteredOwner_Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegCloseKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hKEY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;å®½å­—èŠ‚è½¬æ¢&quot;&gt;å®½å­—èŠ‚è½¬æ¢&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;`WideCharToMultiByte`:æ­¤å‡½æ•°æ˜¯å°†å®½å­—èŠ‚è½¬æ¢ä¸ºasciiï¼Œåˆšå¥½åœ¨ã€ŠåŠ å¯†ä¸è§£å¯†ã€‹è¿™æœ¬ä¹¦çš„ç¬¬ä¸€ç« çœ‹åˆ°è¿‡ï¼Œä¸æ­¤å¯¹åº”çš„æ˜¯`MultiByteToWideChar`

`ASCII`ï¼š7ä½ï¼Œ1 byteã€‚

`Unicode`ï¼š16ä½ï¼Œ2 byteï¼Œæ‰€ä»¥ç§°ä¸ºå®½å­—èŠ‚ï¼Œå°†7ä½çš„ASCIIæ‰©å……ä¸º16ä½(0æ¥å¡«å……)ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¹¦ä¸Šçš„æºç æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªå‡½æ•°è¿›è¡Œè½¬æ¢ï¼Œæ‰€ä»¥å¯¼è‡´æˆ‘çš„è¾“å‡ºåªæœ‰å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚æœ¬æ¥åº”è¯¥è¾“å‡º&lt;code class=&quot;highlighter-rouge&quot;&gt;Windows 10 Enterprise 2015 LTSB&lt;/code&gt;,ä½†åªè¾“å‡ºäº†&lt;code class=&quot;highlighter-rouge&quot;&gt;W&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åæ¥ç»å½¬å½¬å¤§ç¥çš„ç‚¹æ‹¨ï¼Œè®©æˆ‘å¯¹&lt;code class=&quot;highlighter-rouge&quot;&gt;ProductName_Get&lt;/code&gt;çš„å­—ç¬¦ä¸²è¿›è¡Œé€ä¸ªè¾“å‡ºï¼Œç„¶åçœ‹åˆ°äº†&lt;code class=&quot;highlighter-rouge&quot;&gt;\0&lt;/code&gt;çš„bugã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;putchar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProductName_Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt; &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼ŒProductName_Get[0]=â€™Wâ€™,ProductName_Get[1]=â€™\0â€™,ç›´æ¥æŠŠå­—ç¬¦ä¸²æˆªæ–­äº†&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2017/09/MFCRegData//6.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 20 Sep 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/09/MFCRegData/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/09/MFCRegData/</guid>
        
        <category>Coding</category>
        
        
      </item>
    
  </channel>
</rss>
